<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>회원가입</title>
    <link rel="stylesheet" th:href="@{/css/signup.css}" >
</head>
<body>
<div class="shell">
    <div class="header">
        <div class="brand"><div class="logo"></div><span>회원가입</span></div>
        <div class="subtitle">이미 계정이 있으신가요? <a th:href="@{/login}">로그인</a></div>
    </div>

    <section class="card">
        <div class="grid">
            <!-- 페이지: 폼 -->
            <div class="col">
                <div class="title">계정 만들기</div>
                <div class="subtitle">아래 정보를 입력해 주세요</div>
                <form th:action="@{/signup}" th:object="${signUpForm}" method="post" novalidate>
                    <!-- 전역 에러 -->
                    <div class="form-error" th:if="${#fields.hasGlobalErrors()}">
                        <div th:each="e : ${#fields.globalErrors()}" th:text="${e}">유효성 오류가 있습니다.</div>
                    </div>
                    <div class="field">
                        <label class="label" for="email">이메일</label>
                        <input id="email" class="input" type="email" placeholder="you@example.com" th:field="*{email}" required />
                        <div class="error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">이메일 오류</div>
                    </div>

                    <div class="row">
                        <div class="field">
                            <label class="label" for="name">이름</label>
                            <input id="name" class="input" type="text" placeholder="홍길동" th:field="*{name}" required minlength="2" />
                            <div class="error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">이름 오류</div>
                        </div>
                        <div class="field">
                            <label class="label" for="phone">전화번호 </label>
                            <input id="phone" class="input" type="tel" placeholder="010-1234-5678" th:field="*{phone}" required pattern="^0\d{1,2}-\d{3,4}-\d{4}$" />
                            <div class="error" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}">전화번호 오류</div>
                        </div>
                    </div>

                    <div class="field">
                        <label class="label" for="password">비밀번호</label>
                        <input id="password" class="input" type="password" th:field="*{password}" placeholder="영문/숫자/특수문자 8자 이상" minlength="8" required />
                        <div class="pw-meter" aria-hidden="true"><div id="pwBar" class="pw-bar"></div></div>
                        <div class="pw-hint">보안을 위해 최소 8자, 숫자/특수문자 포함을 권장합니다.</div>
                        <div class="error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}">비밀번호 오류</div>
                    </div>

                    <div class="field">
                        <label class="label" for="passwordConfirm">비밀번호 확인</label>
                        <input id="passwordConfirm" class="input" type="password" th:field="*{passwordConfirm}" placeholder="비밀번호 재입력" required />
                        <div class="error" th:if="${#fields.hasErrors('passwordConfirm')}" th:errors="*{passwordConfirm}">확인 비밀번호 오류</div>
                    </div>

                    <div class="checkbox">
                        <input id="terms" type="checkbox" th:field="*{agreeTerms}" required />
                        <label for="terms">서비스 이용약관 및 개인정보 처리방침에 동의합니다. <a th:href="@{/terms}" target="_blank">약관 보기</a></label>
                    </div>
                    <div class="error" th:if="${#fields.hasErrors('agreeTerms')}" th:errors="*{agreeTerms}">동의가 필요합니다</div>

                    <div class="actions">
                        <button type="submit" class="btn primary">회원가입</button>
                        <button type="reset" class="btn">초기화</button>
                    </div>
                </form>
            </div>

            <!-- 오른쪽: 안내/혜택/보안 -->
            <div class="col divider aside">
                <div class="block">
                    <div class="kicker">시작하기 전에</div>
                    <ul class="list">
                        <li><div class="dot"></div><div>이메일 인증을 위해 유효한 이메일이 필요합니다.</div></li>
                        <li><div class="dot"></div><div>소셜 로그인은 가입 후 계정 연결에서 설정할 수 있습니다.</div></li>
                    </ul>
                </div>
                <div class="block">
                    <div class="kicker">비밀번호 보안 팁</div>
                    <ul class="list">
                        <li><div class="dot"></div><div>8자 이상, 대/소문자, 숫자, 특수문자 조합 추천</div></li>
                        <li><div class="dot"></div><div>다른 서비스와 동일한 비밀번호 사용 금지</div></li>
                    </ul>
                </div>
                <div class="block">
                    <div class="kicker">도움이 필요하신가요?</div>
                    <ul class="list">
                        <li><div class="dot"></div><div><a th:href="@{/help}">도움말 센터</a> 또는 <a th:href="@{/contact}">문의하기</a></div></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
</div>

<script>
    // 간단한 비밀번호 강도 힌트 (프런트 참고용)
    const pw = document.getElementById('password');
    const bar = document.getElementById('pwBar');
    if (pw && bar) {
        pw.addEventListener('input', () => {
            const v = pw.value || '';
            let score = 0;
            if (v.length >= 8) score++;
            if (/[A-Z]/.test(v)) score++;
            if (/[0-9]/.test(v)) score++;
            if (/[^A-Za-z0-9]/.test(v)) score++;
            bar.style.width = Math.min(score * 25, 100) + '%';
        });
    }
</script>
</body>
</html>
